import {ArgsTable, Meta, Canvas, Story} from "@storybook/addon-docs";
import {Dropdown} from '../Dropdown';
import {Form} from '../../Form';

<Meta 
  title="Controls/Dropdown" 
  component={Dropdown}
  subcomponents={{ 'Dropdown.Column': Dropdown.Column }}
  argTypes={{
    className: { table: { disable: true } }
  }}
/>

export const domains = [{id: 1, name: '.com'}, {id: 2, name:'.net'}, {id: 3, name:'.org'}, {id: 4, name:'.online'}, {id: 5, name:'.xyz'}, {id: 6, name:'.software'}, {id: 7, name:'.io'}, {id: 8, name:'.edu'}, {id: 9, name:'.tech'}];

export const Template = (args) => 
<div style={{height: '250px'}}>
  <Form data={{}} onChange={() => {}} onValidate={() => {}}>
    <Form.Field
      name="Domain"
      value={null}
      control={<Dropdown {...args}>
        <Dropdown.Column>{(item) => item.name}</Dropdown.Column>
      </Dropdown>}
    />
  </Form>
</div>

# Dropdown

A Dropdown is a replacement for `<select>`. It opens upwards or downwards 
depending on its position in the viewport. Its selection and dropdown items 
are formatted using a formatting function. A Dropdown can also take a search 
callback, which tells provides its subscriber with a search query in order to 
provide the Dropdown with new items.

<ArgsTable of={Dropdown}/>

## Default Dropdown

A simple dropdown. Content is provided through the `data` attribute. 

When the user makes a selection, `onChange` is fired with the Dropdown's name and 
the selected value. *The value is an object, not an ID.*  

The current selection is formatted using the required `label` function. This function takes an item 
and returns a `React.ReactNode`, e.g. `label={(item:any) => item.name}`. 

`Dropdown.Column` is used to format the items in the dropdown list. An item may have more 
than one column. `Dropdown.Column`'s child is a function that formats an item. 

Dropdowns must be controlled components in order for the selected value to show 
up in the selector box. 

<Canvas>
  <Story
    name="Properties"
    args={{ data: domains, onSearch: null, placeholder: "Select domain", maxItems: 4, direction: 'down', label: (item) => item.name }}>
    {Template.bind({})}
  </Story>
</Canvas>




